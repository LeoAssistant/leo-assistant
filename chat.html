<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç - –ß–∞—Ç —Å AI | Leo Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ñ</text></svg>">
</head>
<body>
    <!-- –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <button class="menu-toggle" id="menuToggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
        <i class="fas fa-bars"></i>
    </button>

    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –º–µ–Ω—é -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é (–≤—Å—Ç–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript) -->
    <nav class="nav-container" id="navContainer"></nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <header class="page-header">
            <div>
                <h1 class="page-title">–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h1>
                <p class="page-subtitle">–í–∞—à –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —É—á–µ–±–µ</p>
            </div>
            <div class="header-actions">
                <div class="ai-status">
                    <span class="status-online"></span>
                    <span>AI –æ–Ω–ª–∞–π–Ω</span>
                </div>
                <button class="btn btn-secondary" id="clearChatBtn">
                    <i class="fas fa-trash"></i>
                    –û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç
                </button>
            </div>
        </header>

        <div class="chat-container">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± AI -->
            <div class="ai-info-card">
                <div class="ai-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="ai-details">
                    <h3>–õ–µ–æ AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h3>
                    <p>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π AI –¥–ª—è –ø–æ–º–æ—â–∏ –≤ —É—á–µ–±–µ. –ú–æ–≥—É –ø–æ–º–æ—á—å —Å –º–∞—Ç–µ–º–∞—Ç–∏–∫–æ–π, —Ñ–∏–∑–∏–∫–æ–π, –∏—Å—Ç–æ—Ä–∏–µ–π –∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏.</p>
                    <div class="ai-stats">
                        <div class="ai-stat">
                            <i class="fas fa-brain"></i>
                            <span>GPT-4 Turbo</span>
                        </div>
                        <div class="ai-stat">
                            <i class="fas fa-graduation-cap"></i>
                            <span>–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º</span>
                        </div>
                        <div class="ai-stat">
                            <i class="fas fa-history"></i>
                            <span>–ö–æ–Ω—Ç–µ–∫—Å—Ç: 128K —Ç–æ–∫–µ–Ω–æ–≤</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ -->
            <div class="chat-history" id="chatHistory">
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–¥–µ—Å—å -->
                <div class="welcome-message">
                    <div class="message bot">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-text">
                                –ü—Ä–∏–≤–µ—Ç! –Ø –õ–µ–æ ‚Äî —Ç–≤–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —É—á–µ–±–µ! üéì
                                <br><br>
                                –Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ —Å:
                                ‚Ä¢ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–º
                                ‚Ä¢ –†–µ—à–µ–Ω–∏–µ–º –∑–∞–¥–∞—á –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ –∏ —Ñ–∏–∑–∏–∫–µ
                                ‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –∫ —É—Ä–æ–∫–∞–º –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–º
                                ‚Ä¢ –ê–Ω–∞–ª–∏–∑–æ–º –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π
                                ‚Ä¢ –û—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –ª—é–±–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É
                                <br><br>
                                –ü—Ä–æ—Å—Ç–æ –∑–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å, –∏ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–º–æ—á—å!
                            </div>
                            <div class="message-time">–¢–æ–ª—å–∫–æ —á—Ç–æ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
            <div class="chat-input-container">
                <div class="input-wrapper">
                    <textarea 
                        id="chatInput" 
                        placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –õ–µ–æ... –ù–∞–ø—Ä–∏–º–µ—Ä: '–û–±—ä—è—Å–Ω–∏ —Ç–µ–æ—Ä–µ–º—É –ü–∏—Ñ–∞–≥–æ—Ä–∞' –∏–ª–∏ '–ü–æ–º–æ–≥–∏ —Ä–µ—à–∏—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏–µ'"
                        rows="3"
                        maxlength="2000"
                    ></textarea>
                    <div class="input-actions">
                        <div class="char-counter">
                            <span id="charCount">0</span>/2000
                        </div>
                        <button class="btn btn-primary" id="sendMessageBtn">
                            <i class="fas fa-paper-plane"></i>
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
                <div class="quick-questions">
                    <p>–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤:</p>
                    <div class="quick-question-buttons">
                        <button class="btn-quick-question" data-question="–û–±—ä—è—Å–Ω–∏ –¥—Ä–æ–±–∏ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏">
                            –û–±—ä—è—Å–Ω–∏ –¥—Ä–æ–±–∏
                        </button>
                        <button class="btn-quick-question" data-question="–ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑?">
                            –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑?
                        </button>
                        <button class="btn-quick-question" data-question="–ü–æ–º–æ–≥–∏ —Å —É—Ä–∞–≤–Ω–µ–Ω–∏–µ–º: 2x + 5 = 15">
                            –†–µ—à–∏—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏–µ
                        </button>
                        <button class="btn-quick-question" data-question="–ö—Ç–æ –Ω–∞–ø–∏—Å–∞–ª '–í–æ–π–Ω—É –∏ –º–∏—Ä'?">
                            –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è -->
        <div class="grid-2-col">
            <section class="card">
                <h2 class="card-title">
                    <i class="fas fa-chart-bar"></i>
                    –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
                </h2>
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-label">–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤</div>
                        <div class="stat-value">47</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">–°–µ–≥–æ–¥–Ω—è</div>
                        <div class="stat-value">3</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</div>
                        <div class="stat-value">92%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</div>
                        <div class="stat-value">2.3 —Å–µ–∫</div>
                    </div>
                </div>
            </section>
            
            <section class="card">
                <h2 class="card-title">
                    <i class="fas fa-lightbulb"></i>
                    –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
                </h2>
                <div class="tips-list">
                    <div class="tip-item">
                        <i class="fas fa-check-circle"></i>
                        <span>–ë—É–¥—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö</span>
                    </div>
                    <div class="tip-item">
                        <i class="fas fa-check-circle"></i>
                        <span>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —É—á–µ–±–Ω–∏–∫–∞</span>
                    </div>
                    <div class="tip-item">
                        <i class="fas fa-check-circle"></i>
                        <span>–ó–∞–¥–∞–≤–∞–π—Ç–µ —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã</span>
                    </div>
                    <div class="tip-item">
                        <i class="fas fa-check-circle"></i>
                        <span>–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —É—á–µ–±–Ω–∏–∫–µ</span>
                    </div>
                    <div class="tip-item">
                        <i class="fas fa-check-circle"></i>
                        <span>–õ–µ–æ —É—á–∏—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –≤–∞–º–∏!</span>
                    </div>
                </div>
            </section>
        </div>

        <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ -->
        <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <div>
                <strong>–í–∞–∂–Ω–æ:</strong> –õ–µ–æ ‚Äî —ç—Ç–æ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –Ω–µ–≤–µ—Ä–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —É—á–µ–±–Ω–∏–∫–∞—Ö –∏ —É —É—á–∏—Ç–µ–ª—è. AI –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç —É—á–µ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∞ –ª–∏—à—å –ø–æ–º–æ–≥–∞–µ—Ç –≤ –Ω—ë–º.
            </div>
        </div>
    </main>

    <!-- JavaScript -->
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –º–µ–Ω—é
            loadNavigation();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —á–∞—Ç
            initChat();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
            document.getElementById('clearChatBtn').addEventListener('click', clearChat);
            
            // –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
            const chatInput = document.getElementById('chatInput');
            const charCount = document.getElementById('charCount');
            
            chatInput.addEventListener('input', function() {
                charCount.textContent = this.value.length;
                
                if (this.value.length > 1900) {
                    charCount.style.color = '#ef4444';
                } else if (this.value.length > 1500) {
                    charCount.style.color = '#f59e0b';
                } else {
                    charCount.style.color = '';
                }
            });
            
            // –ë—ã—Å—Ç—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã
            document.querySelectorAll('.btn-quick-question').forEach(button => {
                button.addEventListener('click', function() {
                    const question = this.getAttribute('data-question');
                    chatInput.value = question;
                    chatInput.focus();
                    charCount.textContent = question.length;
                });
            });
        });
        
        function loadNavigation() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ —ç—Ç–æ –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª)
            const navContainer = document.getElementById('navContainer');
            if (navContainer) {
                navContainer.innerHTML = `
                    <div class="nav-header">
                        <div class="logo">
                            <div class="logo-icon">ü§ñ</div>
                            <div class="logo-text">
                                <h2>Leo Assistant</h2>
                                <p>7–ë –ö–ª–∞—Å—Å v1.5</p>
                            </div>
                        </div>
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
                                <div class="user-status">
                                    <span class="status-online"></span> –û–Ω–ª–∞–π–Ω
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="nav-menu">
                        <a href="index.html" class="nav-item">
                            <i class="fas fa-home"></i>
                            <span>–ì–ª–∞–≤–Ω–∞—è</span>
                        </a>
                        
                        <a href="chat.html" class="nav-item active">
                            <i class="fas fa-robot"></i>
                            <span>–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</span>
                        </a>
                        
                        <a href="schedule.html" class="nav-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                        </a>
                        
                        <a href="homework.html" class="nav-item">
                            <i class="fas fa-book"></i>
                            <span>–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</span>
                            <span class="badge">3</span>
                        </a>
                        
                        <a href="friends.html" class="nav-item">
                            <i class="fas fa-user-friends"></i>
                            <span>–î—Ä—É–∑—å—è</span>
                            <span class="badge">5</span>
                        </a>
                        
                        <a href="profile.html" class="nav-item">
                            <i class="fas fa-user"></i>
                            <span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                        </a>
                        
                        <div class="nav-divider"></div>
                        
                        <a href="admin.html" class="nav-item">
                            <i class="fas fa-cogs"></i>
                            <span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
                        </a>
                        
                        <a href="activity.html" class="nav-item">
                            <i class="fas fa-chart-line"></i>
                            <span>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                        </a>
                        
                        <a href="users.html" class="nav-item">
                            <i class="fas fa-users"></i>
                            <span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
                        </a>
                        
                        <div class="nav-divider"></div>
                        
                        <div class="nav-item nav-logout" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>–í—ã–π—Ç–∏</span>
                        </div>
                    </div>
                    
                    <div class="nav-footer">
                        <div class="system-info">
                            <div class="info-item">
                                <i class="fas fa-server"></i>
                                <span>AI: <strong>–ê–∫—Ç–∏–≤–µ–Ω</strong></span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-bolt"></i>
                                <span>–†–µ–∂–∏–º: <strong>–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π</strong></span>
                            </div>
                        </div>
                        <div class="copyright">
                            ¬© 2024 Leo Assistant. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
                        </div>
                    </div>
                `;
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ–Ω—é
                initNavigation();
            }
        }
        
        function initChat() {
            const chatInput = document.getElementById('chatInput');
            const sendBtn = document.getElementById('sendMessageBtn');
            const chatHistory = document.getElementById('chatHistory');
            
            function sendMessage() {
                const message = chatInput.value.trim();
                if (!message) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ', 'warning');
                    return;
                }
                
                if (message.length > 2000) {
                    showNotification('–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å. 2000 —Å–∏–º–≤–æ–ª–æ–≤)', 'error');
                    return;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                addMessage('user', message);
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                chatInput.value = '';
                document.getElementById('charCount').textContent = '0';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
                showTypingIndicator();
                
                // –ò–º–∏—Ç–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç AI (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –±—É–¥–µ—Ç API –∑–∞–ø—Ä–æ—Å)
                setTimeout(() => {
                    removeTypingIndicator();
                    const response = generateAIResponse(message);
                    addMessage('bot', response);
                }, 1500 + Math.random() * 1000);
            }
            
            sendBtn.addEventListener('click', sendMessage);
            
            chatInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }
        
        function addMessage(sender, text) {
            const chatHistory = document.getElementById('chatHistory');
            const messageDiv = document.createElement('div');
            const time = new Date().toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'});
            
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-${sender === 'user' ? 'user-circle' : 'robot'}"></i>
                </div>
                <div class="message-content">
                    <div class="message-text">${escapeHtml(text)}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            chatHistory.appendChild(messageDiv);
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –≤–Ω–∏–∑
            chatHistory.scrollTop = chatHistory.scrollHeight;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            saveToHistory(sender, text);
        }
        
        function showTypingIndicator() {
            const chatHistory = document.getElementById('chatHistory');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'message bot typing';
            typingDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;
            
            chatHistory.appendChild(typingDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }
        
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        function generateAIResponse(question) {
            // –î–µ–º–æ-–æ—Ç–≤–µ—Ç—ã AI (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –±—É–¥–µ—Ç API)
            const responses = {
                '–¥—Ä–æ–±': '–î—Ä–æ–±–∏ ‚Äî —ç—Ç–æ —á–∏—Å–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —á–∞—Å—Ç—å —Ü–µ–ª–æ–≥–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, 1/2 –æ–∑–Ω–∞—á–∞–µ—Ç "–æ–¥–Ω–∞ –ø–æ–ª–æ–≤–∏–Ω–∞". –î—Ä–æ–±–∏ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ —á–∏—Å–ª–∏—Ç–µ–ª—è (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å) –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—è (–Ω–∏–∂–Ω—è—è —á–∞—Å—Ç—å).',
                '—Ñ–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑': '–§–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑ ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞—Å—Ç–µ–Ω–∏—è –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç —Å–æ–ª–Ω–µ—á–Ω—ã–π —Å–≤–µ—Ç, –≤–æ–¥—É –∏ —É–≥–ª–µ–∫–∏—Å–ª—ã–π –≥–∞–∑ –≤ –∫–∏—Å–ª–æ—Ä–æ–¥ –∏ –≥–ª—é–∫–æ–∑—É (–ø–∏—â—É). –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ö–ª–æ—Ä–æ–ø–ª–∞—Å—Ç–∞—Ö —Å –ø–æ–º–æ—â—å—é —Ö–ª–æ—Ä–æ—Ñ–∏–ª–ª–∞.',
                '—É—Ä–∞–≤–Ω': '–î–ª—è —É—Ä–∞–≤–Ω–µ–Ω–∏—è 2x + 5 = 15:\n1. –í—ã—á—Ç–µ–º 5 —Å –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω: 2x = 10\n2. –†–∞–∑–¥–µ–ª–∏–º –Ω–∞ 2: x = 5\n–û—Ç–≤–µ—Ç: x = 5',
                '–≤–æ–π–Ω–∞ –∏ –º–∏—Ä': '"–í–æ–π–Ω–∞ –∏ –º–∏—Ä" ‚Äî —Ä–æ–º–∞–Ω-—ç–ø–æ–ø–µ—è –õ—å–≤–∞ –ù–∏–∫–æ–ª–∞–µ–≤–∏—á–∞ –¢–æ–ª—Å—Ç–æ–≥–æ, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤ 1863-1869 –≥–æ–¥–∞—Ö. –≠—Ç–æ –æ–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π —Ä—É—Å—Å–∫–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã.',
                '–ø–∏—Ñ–∞–≥–æ—Ä': '–¢–µ–æ—Ä–µ–º–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞: –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ –∫–≤–∞–¥—Ä–∞—Ç –≥–∏–ø–æ—Ç–µ–Ω—É–∑—ã —Ä–∞–≤–µ–Ω —Å—É–º–º–µ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –∫–∞—Ç–µ—Ç–æ–≤. –§–æ—Ä–º—É–ª–∞: a¬≤ + b¬≤ = c¬≤',
                '–ø–ª–æ—â–∞–¥—å': '–ü–ª–æ—â–∞–¥—å –∫–≤–∞–¥—Ä–∞—Ç–∞: S = a¬≤ (—Å—Ç–æ—Ä–æ–Ω–∞ –≤ –∫–≤–∞–¥—Ä–∞—Ç–µ)\n–ü–ª–æ—â–∞–¥—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞: S = a √ó b\n–ü–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: S = ¬Ω √ó –æ—Å–Ω–æ–≤–∞–Ω–∏–µ √ó –≤—ã—Å–æ—Ç–∞',
                '–ø–µ—Ä–∏–º–µ—Ç—Ä': '–ü–µ—Ä–∏–º–µ—Ç—Ä –∫–≤–∞–¥—Ä–∞—Ç–∞: P = 4a\n–ü–µ—Ä–∏–º–µ—Ç—Ä –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞: P = 2(a + b)\n–ü–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: P = a + b + c',
                '—Ö–∏–º–∏—è': '–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ú–µ–Ω–¥–µ–ª–µ–µ–≤–∞ ‚Äî —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã—Ö –ø–æ –∞—Ç–æ–º–Ω–æ–º—É –Ω–æ–º–µ—Ä—É, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º—Å—è —Ö–∏–º–∏—á–µ—Å–∫–∏–º —Å–≤–æ–π—Å—Ç–≤–∞–º.',
                '—Ñ–∏–∑–∏–∫–∞': '–ó–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞: F = ma (–°–∏–ª–∞ —Ä–∞–≤–Ω–∞ –º–∞—Å—Å–µ, —É–º–Ω–æ–∂–µ–Ω–Ω–æ–π –Ω–∞ —É—Å–∫–æ—Ä–µ–Ω–∏–µ). –¢—Ä–∏ –∑–∞–∫–æ–Ω–∞ –ù—å—é—Ç–æ–Ω–∞ –æ–ø–∏—Å—ã–≤–∞—é—Ç –¥–≤–∏–∂–µ–Ω–∏–µ —Ç–µ–ª –ø–æ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º —Å–∏–ª.',
                '–∏—Å—Ç–æ—Ä–∏—è': '–î—Ä–µ–≤–Ω–∏–π –†–∏–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª —Å 753 –≥. –¥–æ –Ω.—ç. –¥–æ 476 –≥. –Ω.—ç. –†–∏–º—Å–∫–∞—è –∏–º–ø–µ—Ä–∏—è –æ–∫–∞–∑–∞–ª–∞ –æ–≥—Ä–æ–º–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –∑–∞–ø–∞–¥–Ω–æ–π —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏, –ø—Ä–∞–≤–∞, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∫—É–ª—å—Ç—É—Ä—ã.'
            };
            
            // –ò—â–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –≤–æ–ø—Ä–æ—Å–µ
            const lowerQuestion = question.toLowerCase();
            let response = null;
            
            for (const [key, value] of Object.entries(responses)) {
                if (lowerQuestion.includes(key)) {
                    response = value;
                    break;
                }
            }
            
            // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –æ—Ç–≤–µ—Ç
            if (!response) {
                response = `–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å: "${question}".\n\n–≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ–º–∞! –Ø –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º —Å —ç—Ç–∏–º –≤–æ–ø—Ä–æ—Å–æ–º. –ß—Ç–æ–±—ã –¥–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç, –º–Ω–µ –Ω—É–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:\n\n1. –ö–∞–∫–æ–π —ç—Ç–æ –ø—Ä–µ–¥–º–µ—Ç (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, —Ñ–∏–∑–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è –∏ —Ç.–¥.)?\n2. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å?\n3. –ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–ª–∏ –∑–∞–¥–∞—á–∏?\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –∏ —è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–æ–≥—É!`;
            }
            
            return response;
        }
        
        function saveToHistory(sender, text) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
            const history = JSON.parse(localStorage.getItem('leo-chat-history') || '[]');
            history.push({
                sender,
                text,
                timestamp: new Date().toISOString()
            });
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 50 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
            if (history.length > 50) {
                history.shift();
            }
            
            localStorage.setItem('leo-chat-history', JSON.stringify(history));
        }
        
        function clearChat() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞?')) {
                const chatHistory = document.getElementById('chatHistory');
                const welcomeMessage = chatHistory.querySelector('.welcome-message');
                
                chatHistory.innerHTML = '';
                if (welcomeMessage) {
                    chatHistory.appendChild(welcomeMessage.cloneNode(true));
                }
                
                // –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –≤ localStorage
                localStorage.removeItem('leo-chat-history');
                
                showNotification('–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –æ—á–∏—â–µ–Ω–∞', 'success');
            }
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
    
    <!-- –°—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ -->
    <style>
        .chat-container {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            overflow: hidden;
            margin-bottom: var(--space-xl);
            height: calc(100vh - 300px);
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .ai-info-card {
            padding: var(--space-lg);
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border-bottom: 1px solid var(--color-border);
            display: flex;
            gap: var(--space-lg);
            align-items: center;
        }
        
        .ai-avatar {
            font-size: 3rem;
            color: var(--color-primary);
        }
        
        .ai-details h3 {
            font-size: 1.5rem;
            margin-bottom: var(--space-xs);
            color: var(--color-text-primary);
        }
        
        .ai-details p {
            color: var(--color-text-secondary);
            margin-bottom: var(--space-md);
            line-height: 1.6;
        }
        
        .ai-stats {
            display: flex;
            gap: var(--space-lg);
            flex-wrap: wrap;
        }
        
        .ai-stat {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 0.875rem;
            color: var(--color-text-muted);
        }
        
        .ai-stat i {
            color: var(--color-primary);
        }
        
        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-lg);
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }
        
        .welcome-message {
            margin-bottom: var(--space-lg);
        }
        
        .message {
            display: flex;
            gap: var(--space-md);
            max-width: 85%;
            animation: messageAppear 0.3s ease;
        }
        
        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message.user {
            margin-left: auto;
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            font-size: 1.5rem;
            color: var(--color-primary);
            margin-top: 0.25rem;
        }
        
        .message.user .message-avatar {
            color: var(--color-secondary);
        }
        
        .message-content {
            flex: 1;
        }
        
        .message-text {
            padding: var(--space-md);
            border-radius: var(--radius-lg);
            background: var(--color-bg-tertiary);
            color: var(--color-text-primary);
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .message.user .message-text {
            background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
            color: white;
        }
        
        .message-time {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            margin-top: var(--space-xs);
            text-align: right;
        }
        
        .message.user .message-time {
            text-align: left;
        }
        
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: var(--space-md);
        }
        
        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--color-text-muted);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        .chat-input-container {
            padding: var(--space-lg);
            border-top: 1px solid var(--color-border);
            background: var(--color-bg-card);
        }
        
        .input-wrapper {
            position: relative;
            margin-bottom: var(--space-md);
        }
        
        #chatInput {
            width: 100%;
            padding: var(--space-md);
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            color: var(--color-text-primary);
            font-size: 1rem;
            resize: none;
            transition: all var(--transition-fast) ease;
        }
        
        #chatInput:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .input-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--space-sm);
        }
        
        .char-counter {
            font-size: 0.875rem;
            color: var(--color-text-muted);
        }
        
        .quick-questions p {
            color: var(--color-text-muted);
            margin-bottom: var(--space-sm);
            font-size: 0.875rem;
        }
        
        .quick-question-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }
        
        .btn-quick-question {
            padding: var(--space-xs) var(--space-sm);
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            color: var(--color-primary);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast) ease;
        }
        
        .btn-quick-question:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
        }
        
        .stat-item {
            text-align: center;
            padding: var(--space-md);
            background: rgba(30, 41, 59, 0.5);
            border-radius: var(--radius-lg);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--color-text-muted);
            margin-bottom: var(--space-xs);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-primary);
        }
        
        .tips-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        
        .tip-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm);
            background: rgba(30, 41, 59, 0.5);
            border-radius: var(--radius-lg);
        }
        
        .tip-item i {
            color: var(--color-success);
        }
        
        .alert {
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
            padding: var(--space-md);
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: var(--radius-lg);
            color: var(--color-warning);
            margin-top: var(--space-xl);
        }
        
        .alert i {
            font-size: 1.25rem;
            margin-top: 0.25rem;
        }
        
        @media (max-width: 768px) {
            .chat-container {
                height: auto;
                min-height: 400px;
            }
            
            .ai-info-card {
                flex-direction: column;
                text-align: center;
                padding: var(--space-md);
            }
            
            .ai-stats {
                justify-content: center;
            }
            
            .message {
                max-width: 90%;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .quick-question-buttons {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>
