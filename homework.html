<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è | Leo Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ñ</text></svg>">
    <style>
        .homework-page {
            padding: 20px;
        }
        
        .homework-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .homework-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card-small {
            flex: 1;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid #334155;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .stat-card-small:hover {
            border-color: #3b82f6;
            transform: translateY(-3px);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }
        
        .stat-label-small {
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        .filters-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid #334155;
            border-radius: 8px;
            color: #cbd5e1;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-btn:hover {
            border-color: #3b82f6;
            color: #60a5fa;
        }
        
        .filter-btn.active {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            color: white;
            border-color: transparent;
        }
        
        .search-box {
            flex: 1;
            max-width: 300px;
        }
        
        .search-input {
            width: 100%;
            padding: 10px 15px;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid #334155;
            border-radius: 8px;
            color: #f8fafc;
            font-size: 0.9rem;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
        }
        
        .homework-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .homework-card {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid #334155;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .homework-card:hover {
            border-color: #3b82f6;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.15);
        }
        
        .homework-priority {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .priority-high {
            background-color: #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }
        
        .priority-medium {
            background-color: #f59e0b;
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
        }
        
        .priority-low {
            background-color: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }
        
        .homework-header-card {
            padding: 20px;
            border-bottom: 1px solid #334155;
        }
        
        .homework-subject {
            font-size: 0.9rem;
            color: #3b82f6;
            font-weight: 500;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .homework-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #f8fafc;
        }
        
        .homework-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            color: #94a3b8;
        }
        
        .homework-body {
            padding: 20px;
        }
        
        .homework-description {
            color: #cbd5e1;
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        
        .homework-tasks {
            margin-bottom: 20px;
        }
        
        .tasks-title {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 10px;
        }
        
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        .task-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #475569;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .task-checkbox.checked {
            background: #3b82f6;
            border-color: #3b82f6;
        }
        
        .task-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        .task-text {
            flex: 1;
            color: #cbd5e1;
        }
        
        .task-text.completed {
            text-decoration: line-through;
            color: #94a3b8;
        }
        
        .homework-footer {
            padding: 15px 20px;
            border-top: 1px solid #334155;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(15, 23, 42, 0.5);
        }
        
        .homework-deadline {
            font-size: 0.9rem;
            color: #f59e0b;
            font-weight: 500;
        }
        
        .homework-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-complete {
            padding: 8px 16px;
            background: linear-gradient(90deg, #10b981, #34d399);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-complete:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .btn-view {
            padding: 8px 16px;
            background: rgba(59, 130, 246, 0.1);
            color: #60a5fa;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-view:hover {
            background: rgba(59, 130, 246, 0.2);
        }
        
        .empty-homework {
            text-align: center;
            padding: 60px 20px;
            grid-column: 1 / -1;
        }
        
        .empty-homework i {
            font-size: 3rem;
            color: #475569;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-homework h3 {
            color: #cbd5e1;
            margin-bottom: 10px;
        }
        
        .empty-homework p {
            color: #94a3b8;
            max-width: 400px;
            margin: 0 auto 20px;
        }
        
        .completed-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(90deg, #10b981, #34d399);
            color: white;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .homework-grid {
                grid-template-columns: 1fr;
            }
            
            .homework-stats {
                flex-wrap: wrap;
            }
            
            .stat-card-small {
                min-width: calc(50% - 10px);
            }
            
            .filters-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: 100%;
            }
            
            .homework-meta {
                flex-direction: column;
                gap: 5px;
            }
            
            .homework-actions {
                flex-direction: column;
                width: 100%;
            }
            
            .homework-actions button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
    
    <main class="main-content">
        <div class="homework-page">
            <header class="homework-header">
                <div>
                    <h1 class="page-title">–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h1>
                    <p class="page-subtitle">–ó–∞–¥–∞–Ω–∏—è –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º –∏ —Å—Ä–æ–∫–∏ —Å–¥–∞—á–∏</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="showAddHomeworkModal()">
                        <i class="fas fa-plus"></i>
                        –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ
                    </button>
                </div>
            </header>
            
            <div class="homework-stats">
                <div class="stat-card-small">
                    <div class="stat-number" id="totalHomework">12</div>
                    <div class="stat-label-small">–í—Å–µ–≥–æ –∑–∞–¥–∞–Ω–∏–π</div>
                </div>
                <div class="stat-card-small">
                    <div class="stat-number" id="urgentHomework">3</div>
                    <div class="stat-label-small">–°—Ä–æ—á–Ω—ã–µ</div>
                </div>
                <div class="stat-card-small">
                    <div class="stat-number" id="completedHomework">5</div>
                    <div class="stat-label-small">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                </div>
                <div class="stat-card-small">
                    <div class="stat-number" id="overdueHomework">0</div>
                    <div class="stat-label-small">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</div>
                </div>
            </div>
            
            <div class="filters-bar">
                <button class="filter-btn active" onclick="filterHomework('all')">–í—Å–µ –∑–∞–¥–∞–Ω–∏—è</button>
                <button class="filter-btn" onclick="filterHomework('pending')">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                <button class="filter-btn" onclick="filterHomework('completed')">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</button>
                <button class="filter-btn" onclick="filterHomework('urgent')">–°—Ä–æ—á–Ω—ã–µ</button>
                <button class="filter-btn" onclick="filterHomework('math')">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</button>
                <button class="filter-btn" onclick="filterHomework('physics')">–§–∏–∑–∏–∫–∞</button>
                <button class="filter-btn" onclick="filterHomework('history')">–ò—Å—Ç–æ—Ä–∏—è</button>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞–Ω–∏–π..." oninput="searchHomework(this.value)">
                </div>
            </div>
            
            <div class="homework-grid" id="homeworkGrid">
                <!-- –ó–∞–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            
            <div class="upcoming-deadlines">
                <div class="card">
                    <h2 class="card-title">
                        <i class="fas fa-calendar-exclamation"></i>
                        –ë–ª–∏–∂–∞–π—à–∏–µ —Å—Ä–æ–∫–∏ —Å–¥–∞—á–∏
                    </h2>
                    <div class="deadlines-list" id="deadlinesList">
                        <!-- –°–ø–∏—Å–∫–∏ –¥–µ–¥–ª–∞–π–Ω–æ–≤ -->
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è -->
    <div class="modal" id="addHomeworkModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h3>
                <button class="modal-close" onclick="closeAddHomeworkModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="homeworkForm">
                    <div class="form-group">
                        <label for="subject">–ü—Ä–µ–¥–º–µ—Ç</label>
                        <select id="subject" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</option>
                            <option value="math">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                            <option value="physics">–§–∏–∑–∏–∫–∞</option>
                            <option value="chemistry">–•–∏–º–∏—è</option>
                            <option value="history">–ò—Å—Ç–æ—Ä–∏—è</option>
                            <option value="russian">–†—É—Å—Å–∫–∏–π —è–∑—ã–∫</option>
                            <option value="literature">–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                            <option value="english">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</option>
                            <option value="biology">–ë–∏–æ–ª–æ–≥–∏—è</option>
                            <option value="geography">–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</option>
                            <option value="informatics">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</label>
                        <input type="text" id="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: '–î—Ä–æ–±–∏ –∏ –∏—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ'" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="tasksCount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á</label>
                        <input type="number" id="tasksCount" min="1" max="50" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="deadline">–°—Ä–æ–∫ —Å–¥–∞—á–∏</label>
                        <input type="date" id="deadline" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                        <select id="priority">
                            <option value="low">–ù–∏–∑–∫–∏–π</option>
                            <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="attachment">–°—Å—ã–ª–∫–∞ –Ω–∞ Google Drive (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="url" id="attachment" placeholder="https://drive.google.com/...">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAddHomeworkModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitHomework()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
        // –î–∞–Ω–Ω—ã–µ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
        let homeworkData = [
            {
                id: 1,
                subject: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                subjectIcon: 'fas fa-calculator',
                title: '–î—Ä–æ–±–∏ –∏ –∏—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ',
                description: '–ò–∑—É—á–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π, –∏—Ö —Å–≤–æ–π—Å—Ç–≤ –∏ –º–µ—Ç–æ–¥–æ–≤ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –Ω–∞ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π –∫ –æ–±—â–µ–º—É –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—é.',
                tasks: [
                    { id: 1, text: '–°–æ–∫—Ä–∞—Ç–∏—Ç—å –¥—Ä–æ–±—å 24/36', completed: false },
                    { id: 2, text: '–ù–∞–π—Ç–∏ –æ–±—â–∏–π –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –¥–ª—è 1/3 –∏ 2/5', completed: false },
                    { id: 3, text: '–°—Ä–∞–≤–Ω–∏—Ç—å –¥—Ä–æ–±–∏ 3/4 –∏ 5/6', completed: false },
                    { id: 4, text: '–†–µ—à–∏—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏–µ: x/2 + 1/3 = 5/6', completed: false },
                    { id: 5, text: '–ü—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Å–æ–∫—Ä–∞—Ç–∏–º–æ–π –¥—Ä–æ–±–∏ 15/45', completed: true }
                ],
                tasksCount: 5,
                completedTasks: 1,
                priority: 'high',
                deadline: '2024-01-16',
                assignedBy: '–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç',
                createdAt: '2024-01-10',
                completed: false,
                attachment: 'https://drive.google.com/drive/u/0/folders/12345'
            },
            {
                id: 2,
                subject: '–•–∏–º–∏—è',
                subjectIcon: 'fas fa-flask',
                title: '–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞',
                description: '–ò–∑—É—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –î.–ò. –ú–µ–Ω–¥–µ–ª–µ–µ–≤–∞. –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≥—Ä—É–ø–ø –∏ –ø–µ—Ä–∏–æ–¥–æ–≤.',
                tasks: [
                    { id: 1, text: '–í—ã—É—á–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã 1-20 –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã', completed: false },
                    { id: 2, text: '–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥—Ä—É–ø–ø—É –∏ –ø–µ—Ä–∏–æ–¥ –¥–ª—è Na, Cl, Fe', completed: false },
                    { id: 3, text: '–û–ø–∏—Å–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ —â–µ–ª–æ—á–Ω—ã—Ö –º–µ—Ç–∞–ª–ª–æ–≤', completed: true }
                ],
                tasksCount: 3,
                completedTasks: 1,
                priority: 'medium',
                deadline: '2024-01-17',
                assignedBy: '–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç',
                createdAt: '2024-01-11',
                completed: false,
                attachment: null
            },
            {
                id: 3,
                subject: '–ò—Å—Ç–æ—Ä–∏—è',
                subjectIcon: 'fas fa-landmark',
                title: '–î—Ä–µ–≤–Ω–∏–π –†–∏–º',
                description: '–ò–∑—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –î—Ä–µ–≤–Ω–µ–≥–æ –†–∏–º–∞ –æ—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è –¥–æ –ø–∞–¥–µ–Ω–∏—è –ó–∞–ø–∞–¥–Ω–æ–π –†–∏–º—Å–∫–æ–π –∏–º–ø–µ—Ä–∏–∏.',
                tasks: [
                    { id: 1, text: '–ü—Ä–æ—á–∏—Ç–∞—Ç—å –≥–ª–∞–≤—É 5 —É—á–µ–±–Ω–∏–∫–∞', completed: true },
                    { id: 2, text: '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ–∫–ª–∞–¥ –æ –¶–µ–∑–∞—Ä–µ', completed: true },
                    { id: 3, text: '–°–æ—Å—Ç–∞–≤–∏—Ç—å —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—é –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π', completed: true }
                ],
                tasksCount: 3,
                completedTasks: 3,
                priority: 'low',
                deadline: '2024-01-15',
                assignedBy: '–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç',
                createdAt: '2024-01-08',
                completed: true,
                attachment: 'https://drive.google.com/drive/u/0/folders/67890'
            },
            {
                id: 4,
                subject: '–§–∏–∑–∏–∫–∞',
                subjectIcon: 'fas fa-atom',
                title: '–ó–∞–∫–æ–Ω—ã –ù—å—é—Ç–æ–Ω–∞',
                description: '–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–µ—Ö –∑–∞–∫–æ–Ω–æ–≤ –ù—å—é—Ç–æ–Ω–∞. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º —Å–∏–ª.',
                tasks: [
                    { id: 1, text: '–†–µ—à–∏—Ç—å –∑–∞–¥–∞—á–∏ ‚Ññ1-5 –∏–∑ —É—á–µ–±–Ω–∏–∫–∞', completed: false },
                    { id: 2, text: '–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã —Å–∏–ª –¥–ª—è 3 —Å–∏—Ç—É–∞—Ü–∏–π', completed: false }
                ],
                tasksCount: 2,
                completedTasks: 0,
                priority: 'high',
                deadline: '2024-01-14',
                assignedBy: '–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç',
                createdAt: '2024-01-09',
                completed: false,
                attachment: null
            },
            {
                id: 5,
                subject: '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞',
                subjectIcon: 'fas fa-book',
                title: '–ê–Ω–∞–ª–∏–∑ "–í–æ–π–Ω—ã –∏ –º–∏—Ä–∞"',
                description: '–ê–Ω–∞–ª–∏–∑ –æ–±—Ä–∞–∑–æ–≤ –≥–ª–∞–≤–Ω—ã—Ö –≥–µ—Ä–æ–µ–≤ —Ä–æ–º–∞–Ω–∞ –õ.–ù. –¢–æ–ª—Å—Ç–æ–≥–æ "–í–æ–π–Ω–∞ –∏ –º–∏—Ä".',
                tasks: [
                    { id: 1, text: '–ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–æ–º 1', completed: true },
                    { id: 2, text: '–°–æ—Å—Ç–∞–≤–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –ê–Ω–¥—Ä–µ—è –ë–æ–ª–∫–æ–Ω—Å–∫–æ–≥–æ', completed: true },
                    { id: 3, text: '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∞–Ω–∞–ª–∏–∑ —ç–ø–∏–∑–æ–¥–∞', completed: false }
                ],
                tasksCount: 3,
                completedTasks: 2,
                priority: 'medium',
                deadline: '2024-01-20',
                assignedBy: '–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç',
                createdAt: '2024-01-05',
                completed: false,
                attachment: null
            }
        ];
        
        let currentFilter = 'all';
        let currentSearch = '';
        
        document.addEventListener('DOMContentLoaded', function() {
            loadNavigation();
            renderHomework();
            updateStats();
            renderDeadlines();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è –¥–µ–¥–ª–∞–π–Ω–∞
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('deadline').min = tomorrow.toISOString().split('T')[0];
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑—É–º–Ω—É—é –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É (—á–µ—Ä–µ–∑ –º–µ—Å—è—Ü)
            const nextMonth = new Date();
            nextMonth.setMonth(nextMonth.getMonth() + 1);
            document.getElementById('deadline').max = nextMonth.toISOString().split('T')[0];
        });
        
        function loadNavigation() {
            const navContainer = document.getElementById('navContainer');
            if (navContainer) {
                navContainer.innerHTML = `
                    <div class="nav-header">
                        <div class="logo">
                            <div class="logo-icon">ü§ñ</div>
                            <div class="logo-text">
                                <h2>Leo Assistant</h2>
                                <p>7–ë –ö–ª–∞—Å—Å v1.5</p>
                            </div>
                        </div>
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
                                <div class="user-status">
                                    <span class="status-online"></span> –û–Ω–ª–∞–π–Ω
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="nav-menu">
                        <a href="index.html" class="nav-item">
                            <i class="fas fa-home"></i>
                            <span>–ì–ª–∞–≤–Ω–∞—è</span>
                        </a>
                        
                        <a href="chat.html" class="nav-item">
                            <i class="fas fa-robot"></i>
                            <span>–õ–µ–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</span>
                        </a>
                        
                        <a href="schedule.html" class="nav-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                        </a>
                        
                        <a href="homework.html" class="nav-item active">
                            <i class="fas fa-book"></i>
                            <span>–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</span>
                            <span class="badge">3</span>
                        </a>
                        
                        <a href="friends.html" class="nav-item">
                            <i class="fas fa-user-friends"></i>
                            <span>–î—Ä—É–∑—å—è</span>
                            <span class="badge">5</span>
                        </a>
                        
                        <a href="profile.html" class="nav-item">
                            <i class="fas fa-user"></i>
                            <span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                        </a>
                        
                        <div class="nav-divider"></div>
                        
                        <a href="admin.html" class="nav-item">
                            <i class="fas fa-cogs"></i>
                            <span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
                        </a>
                        
                        <a href="activity.html" class="nav-item">
                            <i class="fas fa-chart-line"></i>
                            <span>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                        </a>
                        
                        <a href="users.html" class="nav-item">
                            <i class="fas fa-users"></i>
                            <span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
                        </a>
                        
                        <div class="nav-divider"></div>
                        
                        <div class="nav-item nav-logout" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>–í—ã–π—Ç–∏</span>
                        </div>
                    </div>
                    
                    <div class="nav-footer">
                        <div class="system-info">
                            <div class="info-item">
                                <i class="fas fa-server"></i>
                                <span>–ó–∞–¥–∞–Ω–∏—è: <strong>${homeworkData.length}</strong></span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-bolt"></i>
                                <span>–°—Ä–æ—á–Ω—ã–µ: <strong>${homeworkData.filter(h => h.priority === 'high' && !h.completed).length}</strong></span>
                            </div>
                        </div>
                        <div class="copyright">
                            ¬© 2024 Leo Assistant. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
                        </div>
                    </div>
                `;
                
                initNavigation();
            }
        }
        
        function renderHomework() {
            const grid = document.getElementById('homeworkGrid');
            let filteredHomework = [...homeworkData];
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä
            if (currentFilter === 'pending') {
                filteredHomework = filteredHomework.filter(h => !h.completed);
            } else if (currentFilter === 'completed') {
                filteredHomework = filteredHomework.filter(h => h.completed);
            } else if (currentFilter === 'urgent') {
                filteredHomework = filteredHomework.filter(h => h.priority === 'high' && !h.completed);
            } else if (currentFilter === 'math') {
                filteredHomework = filteredHomework.filter(h => h.subject === '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞');
            } else if (currentFilter === 'physics') {
                filteredHomework = filteredHomework.filter(h => h.subject === '–§–∏–∑–∏–∫–∞');
            } else if (currentFilter === 'history') {
                filteredHomework = filteredHomework.filter(h => h.subject === '–ò—Å—Ç–æ—Ä–∏—è');
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–∏—Å–∫
            if (currentSearch) {
                const searchLower = currentSearch.toLowerCase();
                filteredHomework = filteredHomework.filter(h => 
                    h.title.toLowerCase().includes(searchLower) ||
                    h.description.toLowerCase().includes(searchLower) ||
                    h.subject.toLowerCase().includes(searchLower)
                );
            }
            
            if (filteredHomework.length === 0) {
                grid.innerHTML = `
                    <div class="empty-homework">
                        <i class="fas fa-clipboard-check"></i>
                        <h3>–ó–∞–¥–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>${currentSearch ? '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å' : '–í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏–ª–∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã'}</p>
                        <button class="btn btn-primary" onclick="showAddHomeworkModal()">
                            <i class="fas fa-plus"></i>
                            –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            filteredHomework.forEach(homework => {
                const deadlineDate = new Date(homework.deadline);
                const now = new Date();
                const timeDiff = deadlineDate - now;
                const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
                
                let deadlineText = '';
                if (daysDiff < 0) {
                    deadlineText = '–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ';
                } else if (daysDiff === 0) {
                    deadlineText = '–°–µ–≥–æ–¥–Ω—è';
                } else if (daysDiff === 1) {
                    deadlineText = '–ó–∞–≤—Ç—Ä–∞';
                } else if (daysDiff <= 7) {
                    deadlineText = `–ß–µ—Ä–µ–∑ ${daysDiff} –¥–Ω–µ–π`;
                } else {
                    deadlineText = deadlineDate.toLocaleDateString('ru-RU');
                }
                
                const progressPercentage = homework.tasksCount > 0 ? 
                    Math.round((homework.completedTasks / homework.tasksCount) * 100) : 0;
                
                html += `
                    <div class="homework-card">
                        ${homework.completed ? '<div class="completed-badge">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>' : ''}
                        <div class="homework-priority priority-${homework.priority}"></div>
                        
                        <div class="homework-header-card">
                            <div class="homework-subject">
                                <i class="${homework.subjectIcon}"></i>
                                ${homework.subject}
                            </div>
                            <div class="homework-title">${homework.title}</div>
                            <div class="homework-meta">
                                <span>–û—Ç: ${homework.assignedBy}</span>
                                <span>–ó–∞–¥–∞—á: ${homework.tasksCount}</span>
                                <span>–°–æ–∑–¥–∞–Ω–æ: ${formatDate(homework.createdAt)}</span>
                            </div>
                        </div>
                        
                        <div class="homework-body">
                            <div class="homework-description">
                                ${homework.description}
                            </div>
                            
                            <div class="homework-tasks">
                                <div class="tasks-title">–ó–∞–¥–∞—á–∏ (${homework.completedTasks}/${homework.tasksCount})</div>
                                <div class="task-list">
                `;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 3 –∑–∞–¥–∞—á–∏
                homework.tasks.slice(0, 3).forEach(task => {
                    html += `
                        <div class="task-item" onclick="toggleTask(${homework.id}, ${task.id})">
                            <div class="task-checkbox ${task.completed ? 'checked' : ''}"></div>
                            <div class="task-text ${task.completed ? 'completed' : ''}">
                                ${task.text}
                            </div>
                        </div>
                    `;
                });
                
                if (homework.tasks.length > 3) {
                    html += `<div class="task-item">... –∏ –µ—â–µ ${homework.tasks.length - 3} –∑–∞–¥–∞—á</div>`;
                }
                
                html += `
                                </div>
                            </div>
                            
                            ${homework.attachment ? `
                                <div class="homework-attachment">
                                    <a href="${homework.attachment}" target="_blank" class="link">
                                        <i class="fab fa-google-drive"></i>
                                        –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ Google Drive
                                    </a>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="homework-footer">
                            <div class="homework-deadline">
                                <i class="fas fa-clock"></i>
                                –°–¥–∞—Ç—å –¥–æ: ${deadlineText}
                            </div>
                            <div class="homework-actions">
                                ${!homework.completed ? `
                                    <button class="btn-complete" onclick="completeHomework(${homework.id})">
                                        <i class="fas fa-check"></i>
                                        ${progressPercentage === 100 ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å' : '–í—ã–ø–æ–ª–Ω–∏—Ç—å'}
                                    </button>
                                ` : ''}
                                <button class="btn-view" onclick="viewHomework(${homework.id})">
                                    <i class="fas fa-eye"></i>
                                    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }
        
        function filterHomework(filter) {
            currentFilter = filter;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É —Ñ–∏–ª—å—Ç—Ä–∞
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeBtn = document.querySelector(`.filter-btn[onclick="filterHomework('${filter}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            renderHomework();
        }
        
        function searchHomework(query) {
            currentSearch = query;
            renderHomework();
        }
        
        function updateStats() {
            const total = homeworkData.length;
            const urgent = homeworkData.filter(h => h.priority === 'high' && !h.completed).length;
            const completed = homeworkData.filter(h => h.completed).length;
            const overdue = homeworkData.filter(h => {
                const deadline = new Date(h.deadline);
                const now = new Date();
                return deadline < now && !h.completed;
            }).length;
            
            document.getElementById('totalHomework').textContent = total;
            document.getElementById('urgentHomework').textContent = urgent;
            document.getElementById('completedHomework').textContent = completed;
            document.getElementById('overdueHomework').textContent = overdue;
        }
        
        function renderDeadlines() {
            const deadlinesList = document.getElementById('deadlinesList');
            const now = new Date();
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∑–∞–¥–∞–Ω–∏—è –ø–æ –¥–µ–¥–ª–∞–π–Ω—É
            const sortedHomework = [...homeworkData]
                .filter(h => !h.completed)
                .sort((a, b) => new Date(a.deadline) - new Date(b.deadline))
                .slice(0, 5);
            
            if (sortedHomework.length === 0) {
                deadlinesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-calendar-check"></i>
                        <p>–í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="deadlines-grid">';
            
            sortedHomework.forEach(homework => {
                const deadlineDate = new Date(homework.deadline);
                const timeDiff = deadlineDate - now;
                const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
                
                let urgencyClass = '';
                if (daysDiff < 0) {
                    urgencyClass = 'overdue';
                } else if (daysDiff <= 1) {
                    urgencyClass = 'urgent';
                } else if (daysDiff <= 3) {
                    urgencyClass = 'warning';
                }
                
                html += `
                    <div class="deadline-item ${urgencyClass}">
                        <div class="deadline-subject">
                            <i class="${homework.subjectIcon}"></i>
                            ${homework.subject}
                        </div>
                        <div class="deadline-title">${homework.title}</div>
                        <div class="deadline-info">
                            <span class="deadline-date">${deadlineDate.toLocaleDateString('ru-RU')}</span>
                            <span class="deadline-days">
                                ${daysDiff < 0 ? '–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ' : daysDiff === 0 ? '–°–µ–≥–æ–¥–Ω—è' : daysDiff === 1 ? '–ó–∞–≤—Ç—Ä–∞' : `–ß–µ—Ä–µ–∑ ${daysDiff} –¥–Ω.`}
                            </span>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            deadlinesList.innerHTML = html;
        }
        
        function toggleTask(homeworkId, taskId) {
            const homework = homeworkData.find(h => h.id === homeworkId);
            if (!homework) return;
            
            const task = homework.tasks.find(t => t.id === taskId);
            if (!task) return;
            
            task.completed = !task.completed;
            homework.completedTasks = homework.tasks.filter(t => t.completed).length;
            
            // –ï—Å–ª–∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –æ—Ç–º–µ—á–∞–µ–º –∑–∞–¥–∞–Ω–∏–µ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ
            if (homework.completedTasks === homework.tasksCount) {
                homework.completed = true;
                showNotification('–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! +50 –æ—á–∫–æ–≤', 'success');
            }
            
            renderHomework();
            updateStats();
            renderDeadlines();
        }
        
        function completeHomework(id) {
            const homework = homeworkData.find(h => h.id === id);
            if (!homework) return;
            
            homework.completed = true;
            homework.tasks.forEach(task => task.completed = true);
            homework.completedTasks = homework.tasksCount;
            
            showNotification('–ó–∞–¥–∞–Ω–∏–µ –æ—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ!', 'success');
            renderHomework();
            updateStats();
            renderDeadlines();
        }
        
        function viewHomework(id) {
            const homework = homeworkData.find(h => h.id === id);
            if (!homework) return;
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–¥–∞–Ω–∏—è
            alert(`–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞–Ω–∏–∏:\n\n${homework.title}\n\n${homework.description}\n\n–ó–∞–¥–∞—á–∏:\n${homework.tasks.map(t => `‚Ä¢ ${t.text}`).join('\n')}`);
        }
        
        function showAddHomeworkModal() {
            document.getElementById('addHomeworkModal').style.display = 'flex';
            document.getElementById('title').focus();
        }
        
        function closeAddHomeworkModal() {
            document.getElementById('addHomeworkModal').style.display = 'none';
            document.getElementById('homeworkForm').reset();
        }
        
        function submitHomework() {
            const form = document.getElementById('homeworkForm');
            if (!form.checkValidity()) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            const newHomework = {
                id: homeworkData.length + 1,
                subject: document.getElementById('subject').options[document.getElementById('subject').selectedIndex].text,
                subjectIcon: getSubjectIcon(document.getElementById('subject').value),
                title: document.getElementById('title').value,
                description: document.getElementById('description').value || '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç',
                tasks: generateTasks(document.getElementById('tasksCount').value),
                tasksCount: parseInt(document.getElementById('tasksCount').value),
                completedTasks: 0,
                priority: document.getElementById('priority').value,
                deadline: document.getElementById('deadline').value,
                assignedBy: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
                createdAt: new Date().toISOString().split('T')[0],
                completed: false,
                attachment: document.getElementById('attachment').value || null
            };
            
            homeworkData.unshift(newHomework);
            
            showNotification('–ó–∞–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!', 'success');
            closeAddHomeworkModal();
            renderHomework();
            updateStats();
            renderDeadlines();
        }
        
        function getSubjectIcon(subject) {
            const icons = {
                'math': 'fas fa-calculator',
                'physics': 'fas fa-atom',
                'chemistry': 'fas fa-flask',
                'history': 'fas fa-landmark',
                'russian': 'fas fa-language',
                'literature': 'fas fa-book',
                'english': 'fas fa-globe',
                'biology': 'fas fa-dna',
                'geography': 'fas fa-globe-americas',
                'informatics': 'fas fa-laptop-code'
            };
            
            return icons[subject] || 'fas fa-book';
        }
        
        function generateTasks(count) {
            const tasks = [];
            for (let i = 1; i <= count; i++) {
                tasks.push({
                    id: i,
                    text: `–ó–∞–¥–∞—á–∞ ${i}`,
                    completed: false
                });
            }
            return tasks;
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU');
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('addHomeworkModal');
            if (event.target === modal) {
                closeAddHomeworkModal();
            }
        });
    </script>
</body>
</html>
